# Noticiencias News Collector environment template
# Copy this file to .env and adjust values for your environment.

# -----------------------------------------------------------------------------
# Runtime environment
# Only one of ENV, APP_ENV, or ENVIRONMENT is required. The first non-empty
# value is used to determine the runtime environment (development, staging, prod).
ENV=development
APP_ENV=
ENVIRONMENT=
# Toggle verbose development settings. Defaults to true outside prod/staging.
DEBUG=true

# -----------------------------------------------------------------------------
# Logging
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Database configuration
# SQLite is used by default; uncomment the following block to run against Postgres.
#DB_HOST=localhost
#DB_PORT=5432
#DB_NAME=news_collector
#DB_USER=collector
#DB_PASSWORD=change-me
#DB_SSLMODE=require
#DB_CONNECT_TIMEOUT=10
#DB_STATEMENT_TIMEOUT=30000
#DB_POOL_SIZE=10
#DB_MAX_OVERFLOW=5
#DB_POOL_TIMEOUT=30
#DB_POOL_RECYCLE=1800
#NEWS_DB_PATH=./data/news.db

# -----------------------------------------------------------------------------
# Collection pipeline
COLLECTION_INTERVAL=6
REQUEST_TIMEOUT=30
ASYNC_ENABLED=false
MAX_CONCURRENT_REQUESTS=8
MAX_ARTICLES_PER_SOURCE=50
RECENT_DAYS_THRESHOLD=7
REQUEST_DELAY=1.0
DOMAIN_DEFAULT_DELAY=1.0
MAX_RETRIES=3
RETRY_DELAY=1
BACKOFF_BASE=0.5
BACKOFF_MAX=10.0
JITTER_MAX=0.3
RESPECT_ROBOTS=true
ROBOTS_CACHE_TTL=3600

# -----------------------------------------------------------------------------
# Scoring configuration
WEIGHT_SOURCE=0.25
WEIGHT_RECENCY=0.20
WEIGHT_CONTENT=0.25
WEIGHT_ENGAGEMENT=0.30
DAILY_TOP_COUNT=10
MINIMUM_SCORE=0.3
SCORING_MODE=advanced
FEATURE_WEIGHT_SOURCE=0.30
FEATURE_WEIGHT_FRESHNESS=0.25
FEATURE_WEIGHT_CONTENT=0.25
FEATURE_WEIGHT_ENGAGEMENT=0.20
SCORING_WORKERS=4
FRESHNESS_HALF_LIFE_HOURS=18.0
FRESHNESS_MAX_DECAY_HOURS=168.0
DIVERSITY_PENALTY_WEIGHT=0.15
DIVERSITY_MAX_PENALTY=0.3
SCORING_TITLE_LENGTH_DIVISOR=120.0
SCORING_SUMMARY_LENGTH_DIVISOR=400.0
SCORING_ENTITY_TARGET_COUNT=5.0
SCORING_CONTENT_WEIGHT_TITLE=0.4
SCORING_CONTENT_WEIGHT_SUMMARY=0.4
SCORING_CONTENT_WEIGHT_ENTITY=0.2
SCORING_SENTIMENT_POSITIVE=0.7
SCORING_SENTIMENT_NEGATIVE=0.6
SCORING_SENTIMENT_NEUTRAL=0.5
SCORING_SENTIMENT_FALLBACK=0.5
SCORING_WORD_COUNT_DIVISOR=800.0
SCORING_ENGAGEMENT_EXTERNAL_WEIGHT=0.6
SCORING_ENGAGEMENT_LENGTH_WEIGHT=0.4
RERANKER_SEED=1337
SOURCE_CAP_PERCENTAGE=0.5
TOPIC_CAP_PERCENTAGE=0.6

# -----------------------------------------------------------------------------
# Content processing
MIN_CONTENT_LENGTH=100

# -----------------------------------------------------------------------------
# Enrichment
ENRICHMENT_MODEL_KEY=pattern_v1
ENRICHMENT_PROVIDER=pattern
ENRICHMENT_ANALYSIS_CACHE=512
ENRICHMENT_RESULT_CACHE=256
ENRICHMENT_MODEL_VERSION=2025.02-pattern-v1

# -----------------------------------------------------------------------------
# Deduplication
SIMHASH_THRESHOLD=10
SIMHASH_CANDIDATE_WINDOW=500

# -----------------------------------------------------------------------------
# Operational scripts
HEALTHCHECK_MAX_PENDING=250
HEALTHCHECK_MAX_INGEST_MINUTES=180
AUDIT_TODOS_MAX_NEW=0
